\input{../tex/preambule}

\title{\vspace{\fill}\textbf{\Huge Compte Rendu}}
\author{
	Sonny Klotz - Jean-Didier Pailleux - Malek Zemni
	\vspace{2em}\\
	\textit{Interface de chargement, de contrôle}\\\textit{et d’analyse statistique des données}\\\textit{pour la constitution d’un graphe de flux}
	\vspace{2em}
}

\begin{document}
\pagenumbering{gobble}\clearpage
\maketitle\vspace{9em}
\begin{center}\includegraphics[scale=0.7]{../Cahier/logo.png}\end{center}
\begin{flushright}Module \textit{Projet}\end{flushright}
\newpage
\tableofcontents
\newpage\clearpage\pagenumbering{arabic}

	\section*{Introduction}
	Ce document est le compte-rendu final de notre travail qui s'inscrit dans le cadre du module \textit{Projet} de la licence informatique de l' \textit{\textbf{UVSQ}}. Le sujet de ce projet a été proposé par l'entreprise \textit{\textbf{DCbrain}}.\\
	
	Notre client, \textit{\textbf{DCbrain}}, développe des outils qui permettent de visualiser le comportement des \textbf{réseaux physiques} afin de prédire et trouver les problèmes de ces réseaux dans le but de les optimiser. Ces réseaux physiques sont principalement les réseaux industriels, de fluide ou de distribution, tels les réseaux électriques. Des données sont collectées à partir de ces réseaux puis analysées grâce aux technologies du \textbf{Big Data}. Le but est d'en extraire une valeur ajoutée.\\
	
	Notre tâche correspond au travail indispensable d’analyse préliminaire de ces données, afin de faciliter leur exploitation. Ce projet a donc pour objectif de fournir aux utilisateurs une application web qui permettra de charger les données collectées, les visualiser et enfin les analyser.\\
	
	Dans une première partie de ce document, on présentera l'architecture de notre application, illustrée par un organigramme qui a été préalablement établi. Cet organigramme représente un découpage de l'application en modules avec les différentes informations qui circulent entre ces modules.\\
	Dans une deuxième partie, on parlera des différents langages de programmation choisis pour réaliser l'application et des contraintes qui ont justifié ces choix.\\
	Ensuite, dans une troisième partie, on traitera la partie technique de notre projet, c'est à dire, l'application, son fonctionnement et ses problèmes.\\
	Finalement, dans les deux dernières parties, on établira un bilan quant à l'organisation interne au sein du groupe et un bilan comparatif des coûts présumés et des coûts finaux de notre produit.\\
	
	%PAS ICI 
	%Deux documents supplémentaires sont livrés avec l'application, un manuel utilisateur décrivant comment faire fonctionner notre application, et une documentation technique des modules de notre produit.
			
	%Peut-être parler un peu plus du big data, aussi des techniques de graphes mining dans le travail de DC brain, pour présenter le fait que le réseau est assimilé à un graphe =============== oh no c bcp
	
	\section{Architecture de l'application}
		\subsection{Organigramme et données échangées}
		Cet organigramme a été préalablement établi dans le cahier des charges du produit. Il représente la décomposition en modules de l'application, ainsi que les informations qui circulent entre ces modules.\\
		\textbf{Remarque :} on pourra noter quelques légers arrangements dans la représentation des informations transmises entre les modules de l'organigramme. Ces arrangements sont principalement effectués pour des fins d'optimisation et seront explicitement justifiés.
		\begin{figure}[H]
			\begin{tikzpicture}
			\begin{scope}[xscale=2,yscale=1.5]	
				\node (IW) at (0,5) [rectangle,draw,text depth=3cm,minimum width=16cm,minimum height=4cm,font=\textbf\Large] {\begin{tabular}{c}Interface web\end{tabular}};
				\node (F2) [rectangle,draw,dashed] at ([yshift=0.4cm]IW.center) {\begin{tabular}{c}Fenêtre rôle et choix colonne \end{tabular}};
				\node (F1) [rectangle,draw,dashed] at ([xshift=-4cm]F2.east) {\begin{tabular}{c}Fenêtre choix fichier\end{tabular}};
				\node (F3) [rectangle,draw,dashed] at ([xshift=4.1cm]F2.west) {\begin{tabular}{c}Fenêtre résultats ADD\end{tabular}};
				\node (MAIN) [rectangle,draw,dashed,below=of F2.south,yshift=0cm] {\begin{tabular}{c}Gestion des flux\end{tabular}};

			
				\node (API1) at (-2.5,0) [rectangle,draw,fill=blue!25,text depth=-3.5cm,minimum width=5cm,minimum height=5cm,font=\textbf\Large] {\begin{tabular}{c}API 1\\Chargement des données\end{tabular}};
				\node (VERIF) [rectangle,draw,dashed,fill=white] at ([yshift=1cm]API1.center){\begin{tabular}{c}Vérification format\\fichier\end{tabular}};
				\node (ANALYS) [rectangle,draw,dashed,fill=white,below=of VERIF.south,yshift=0.5cm] {\begin{tabular}{c}Analyse contenu\\fichier\end{tabular}};
			
				\node (API2) at (2.5,0) [rectangle,draw,fill=blue!25,text depth=-5cm,minimum width=5cm,minimum height=6.5cm,font=\textbf\Large] {\begin{tabular}{c}API 2\\Analyse descriptive des données\end{tabular}};
				\node (ADD1) [rectangle,draw,dashed,fill=white] at ([yshift=1.7cm]API2.center){\begin{tabular}{c}ADD qualitatives\end{tabular}};
				\node (ADD2) [rectangle,draw,dashed,fill=white,below=of ADD1.south,yshift=0.5cm] {\begin{tabular}{c}ADD quantitatives\\discrètes\end{tabular}};
				\node (ADD3) [rectangle,draw,dashed,fill=white,below=of ADD2.south,yshift=0.5cm] {\begin{tabular}{c}ADD quantitatives\\continues\end{tabular}};
			
				\draw[-triangle 45] (F1.south east) -- node[anchor=south,left]{9} (MAIN.north west);
				\path[->,>=stealth'] (MAIN) edge[bend left=10] node[anchor=south,left]{10} (F2);
				\path[->,>=stealth'] (F2) edge[bend left=10] node[anchor=south,right]{11} (MAIN);
				\path[->,>=stealth'] (MAIN) edge[bend left=10] node[anchor=south,right]{12} (F3);
				\path[->,>=stealth'] (F3) edge[bend left=10] node[anchor=south,right]{13} (MAIN);
			
				\draw[-triangle 45,red] (MAIN.south west) -- node[anchor=south,left] {1} (API1.90);
				\draw[-triangle 45,red] (API1) -| node[anchor=south,below] {2} (MAIN.215);			
			
				\draw[-triangle 45] (MAIN.south east) -- node[anchor=south,right] {3} (ADD1.80);
				\draw[-triangle 45] (ADD1.110) -- node[anchor=south,left] {4} (MAIN.343);
				\draw[-triangle 45] (MAIN.335) |- node[anchor=south,right] {5} (ADD2.175);
				\draw[-triangle 45] (ADD2.185) -| node[anchor=south,below] {6} (MAIN.330);				
				\draw[-triangle 45] (MAIN.290) |- node[anchor=north,right] {7} (ADD3.175);
				\draw[-triangle 45] (ADD3.185) -| node[anchor=south,below] {8} (MAIN.270);
			
			\end{scope}
			%Légende
			\begin{scope}
				\node (LEGENDE) at (-7,-5) {\textbf{Légende :}};
				\node (FAMILLE) at (-4.5,-5) [rectangle,draw] {\begin{tabular}{c}Package\end{tabular}};
				\node (MODULE) at (-2,-5) [rectangle,draw,dashed] {\begin{tabular}{c}Module\end{tabular}};
				\path[->,>=stealth'] (0.5,-5.3) edge[bend left=0] node[anchor=south,above]{informations transmises} (3,-5.3);
				\path[->,>=stealth',red] (0.5,-6.3) edge[bend left=0] node[anchor=south,above]{optimisation} (3,-6.3);
			\end{scope}
			\end{tikzpicture}
			\caption{Organigramme des différents modules du logiciel}\label{fig:M1}
		\end{figure}
			
		\textbf{Notes :}\\
			\textbf{({\color{red}1})} Chemin du fichier CSV importé : lancement des fonctionnalités du module de chargement de manière indépendante : la vérification de son format et l'analyse de son contenu\\
			\textbf{({\color{red}2})} Le résultat du chargement du fichier CSV importé :
			\begin{itemize}
				\item soit un message d'erreur signalant un problème lié au fichier
				\item soit deux structures, l'une contenant les données du fichier, et l'autre contenant une description du nom, du type, et des erreurs de chaque colonne de données du fichier
			\end{itemize}
			{\color{red}Justification de l'optimisation :} lors de la phase d'enchaînement entre les différents modules de l'application, on a remarqué qu'il était plus judicieux d'établir une communication à une seule passe avec le package de chargement des données, au lieu de faire le va et vient sur ses différents modules. De cette manière, ce package devient indépendant et assure ainsi une facilité lors du débogage et de la maintenance.\\
			\textbf{(3)} Ensemble de données de type qualitatif\\
			\textbf{(4)} Erreur ou effectifs, effectifs cumulés, fréquences, fréquences cumulées, diagramme en secteur, histogramme\\
			\textbf{(5)} Ensemble de données de type quantitatif discret\\
			\textbf{(6)} Erreur ou indicateurs de tendance central, de dispersion et de forme, les anomalies, la distribution des données, un diagramme à moustaches\\
			\textbf{(7)} Ensemble de données de type quantitatif continu\\
			\textbf{(8)} Même données que (6)\\
			\textbf{(9)} Chemin du fichier CSV importé \\
			\textbf{(10)} Informations du (2) et ensemble de données contenu dans le fichier CSV \\
			\textbf{(11)} Signal de validation du choix de la colonne, et noms des colonnes\\
			\textbf{(12)} Envoi des résultats d'analyses de (4), (6) et (8)\\
			\textbf{(13)} Signal de contrôle : demande d'exportation des résultats de l'ADD, analyse d'une autre colonne, ou importation d'un autre fichier\\
		
		\subsection{Format du fichier CSV}
		Le format du fichier a été établi par le client \textbf{\textit{DCbrain}}. Son contenu est assez structuré et est décrit par des colonnes aux types prédéfinies :
		\begin{center}\begin{longtable}{|>{\centering}m{5cm}|>{\centering}m{2cm}|>{\centering}m{2cm}|>{\centering}m{2.5cm}|>{\centering\arraybackslash}m{2cm}|}			
			\hline \multicolumn{1}{|c|}{\textbf{timestamp}} & \multicolumn{1}{c|}{\textbf{parent}} & \multicolumn{1}{ c|}{\textbf{enfant}} & \multicolumn{1}{c|}{\textbf{mesure 1}} & {\textbf{mesure 2}} \\
			\hline 	January 1st 2017, 15:00:00.000 & 102 & 95 & 26644.235 & 176.253\\
			\hline
		\end{longtable}\vspace{-2em}\end{center}
		\textbf{Remarque :} le graphe de flux utilisé par \textbf{\textit{DCbrain}} pour analyser les réseaux de ses clients est orienté, d'où l'utilisation des nœuds \textit{parent - enfant} numérotés. Ceux-ci permettent d'identifier une connexion précise. Les colonnes \textit{mesure} représentent des données mesurées sur une connexion à un temps donné. Le nombre de ces colonne n'est pas limité et en pratique il ne dépassera pas la dizaine.
				
		
		\subsection{Fonctionnalités des modules}
		%Faites un tri dans vos fonctionnalités : réduire le plus possible, pour que tout rentre en 10 pages. Et mettre que les fonctionnalités du produit final.
		%Cette partie a aussi besoin d'un peu de mise en page, il y a trop de marge à droite a cause des enum + itemize + description)
	
			\subsubsection*{Package Chargement des données}
			\begin{enumerate}
				\item Module Vérification format fichier :\\
				Vérification de l'existence du fichier, de l'extension, de la lisibilité du contenu (texte brut ou formaté) et l'accessibilité en lecture.
				\item Module Analyse contenu fichier :\\
				Ce module comprend deux fonctionnalités principales :
				\begin{itemize}[leftmargin=*]
					\item Lecture du contenu du fichier CSV : on détermine le délimiteur de données du fichier, puis on lit ses données ligne par ligne. Ces données sont stockées dans une (\textbf{première structure}.
					\item Description des données de chaque colonne du fichier CSV : on stocke les noms des colonnes fournis dans le fichier, ensuite on détermine les types de données attendus à partir de ces noms, et finalement, on parcourt la structure contenant les données du fichier en comparant le type de ces données au type attendu. Si ces types ne correspondent pas, on indique une description de l'erreur.\\
					Ces trois informations (nom, type et erreurs) sont stockées dans une (\textbf{deuxième structure}.
				\end{itemize}
				Ce module va donc fournir les deux structures décrites ci-dessus.
			\end{enumerate}
			
			\subsubsection*{Package Analyse descriptive de données}
			\begin{enumerate}
				\item Module ADD qualitatives :
					\begin{itemize}[leftmargin=*]
					\item Calcul des effectifs, effectifs cumulés, fréquences et fréquences cumulées des données
					\item Préparation des représentations graphiques : diagramme en secteur et histogramme
					\end{itemize}
				\item Module ADD quantitatives discrètes :
					\begin{itemize}[leftmargin=*]
					\item Statistiques : moyenne, quantiles, variance, écart-type, coefficients de symétrie et d'aplatissement de Fisher
					\item Anomalies de Tukey : toute donnée hors de l'intervalle [Q1 - 1.5*IQ ; Q3 + 1.5*IQ], où Q1 et Q3 sont les quartiles, et IQ l'écart inter-quartiles.
					\item Préparation des représentations graphiques : fonction de distribution, fonction de distribution cumulative,  boîte à moustaches
					\end{itemize}
				\item Module ADD quantitatives continues :
					\begin{itemize}[leftmargin=*]
					\item Discrétisation de l'étendue (découpage en classe d'intervalles)
					\item Calcul des quantiles pour le cas  de données continues
					\item Préparation des représentations graphiques : fonction de distribution cumulative
					\end{itemize}
			\end{enumerate}
			
			\subsubsection*{Package Interface web}
			\begin{enumerate}
				\item Module Gestion des flux :
					\begin{itemize}[leftmargin=*]
					\item Gestion des branchements : exécution normale ou arrêts pour cause d'erreur.
					\item Interface entres les différentes fonctionnalités : communique les données nécessaires entre les modules.
					\end{itemize}
				\item Module Fenêtre choix fichier :
					\begin{itemize}[leftmargin=*]
					\item Récupération un fichier CSV en renseignant son chemin en parcourant l'arborescence de fichiers, ou de la manière d'un Drag \& Drop.
					\end{itemize}
				\item Module Fenêtre rôle et choix colonne :
					\begin{itemize}[leftmargin=*]
					\item Affichage des données du fichier CSV : noms de colonnes et leurs valeurs.
					\item Affichage du nombre de lignes du fichier.
					\item Affichage des données erronés (description de l'erreur).
					\item Affichage d'un échantillon de données du fichier à l'aide de filtres : filtres par nombre de lignes ou par valeurs de certaines colonnes.
					\item Sélection et envoi d'une colonne de mesures pour lancer l'analyse sur celle-ci. 
					\end{itemize}
				\item Module Fenêtre résultats ADD :
					\begin{itemize}[leftmargin=*]
					\item Affichage des résultats d'analyse descriptive : informations statistiques de l'API 2 et représentations graphiques pour visualiser les données dans leur ensemble.
					\item Une fonctionnalité de retour en arrière permet de sélectionner une nouvelle colonne sans relancer l'applet.
					\end{itemize}
				\end{enumerate}
		
	\section{Outils et langages de programmation}
		\subsection{Contraintes}
		Lors de la réalisation de l'application, des contraintes ont du être respectées. Ces contraintes ont été imposées par notre client \textbf{\textit{DCbrain}} lors de la remise du sujet du projet. On peut en énumérer trois, qui sont les suivantes:
		\begin{enumerate}
			\item Le produit doit fournir une application web : notre produit sera une application fonctionnant sur un navigateur web, appelée \textbf{\textit{applet}}.
			\item Le produit doit être développé avec un langage de programmation compatible avec l'analyse de données : le langage de programmation choisi doit inclure des bibliothèques qui permettent d'analyser les données (taches de data mining et de machine Learning).
			\item Le produit doit fournir une API (ensemble de packages) d'analyse de données : le code source de l'application doit intégrer des API d'analyse descriptive de données qui pourront être réutilisés par le client.
		\end{enumerate}	
		Ces contraintes se sont avérées déterminantes pour les choix techniques qu'on fait, et en l'occurrence, le choix des langages de programmation. 
		
		\subsection{Choix des outils et des langages}
		Les contraintes imposées par le client ainsi que les exigences définies nous ont permis de fixer nos choix sur plusieurs langages de programmation qui vont interagir ensemble : 
		\begin{itemize}[leftmargin=*]
			\item \textbf{Python :} d'une part, ce langage est adapté pour l'analyse descriptives de données, puisqu'il est doté de nombreux modules permettant d'effectuer du calcul scientifique sur des données, donc l'analyse de données. D'autre part, \textbf{\textit{Python}} est compatible avec le développement d’applications web grâce aux bibliothèques web qui permettent cela, dont \textbf{\textit{Flask}} qu'on a utilisé. En effet, \textbf{\textit{Flask}} est une bibliothèque qui s’efforce d’être la plus simple possible pour une prise en main, à l'opposé d'autres bibliothèques. C'est donc plus abordable pour une première expérience sur le développement d'applications web.
			\item \textbf{Langages de programmation web :} l'application devant être une applet intégrée dans une page web pour s'exécuter, le recours à des langages de balisage comme \textbf{\textit{HTML}} pour la présentation et \textbf{\textit{CSS}} pour la mise en forme de ces pages web était nécessaire.\\
			Ensuite, pour permettre à l'application de faire communiquer les pages web avec un serveur web sans occasionner le rechargement de la page, nous avons eu recours à \textbf{\textit{Ajax}}. Il s'agit d'un concept de programmation web reposant sur plusieurs technologies comme le \textbf{\textit{Javascript}}, qui lui se charge d'établir la connexion entre la page web et serveur. \textbf{\textit{Javascript}} est également employé pour rendre les pages web interactives. \textbf{\textit{Jquery}} est quant à lui utilisé pour faire le lien entre \textbf{\textit{HTML}} et \textbf{\textit{Ajax}}.
			\item \textbf{Autres outils :} pour la génération de la documentation des fonctionnalités du programme, on a utilisé le logiciel \textbf{\textit{Sphinx}} qui se charge de générer une \textit{docstring} à partir des commentaires présents dans le code python.
		\end{itemize}
		
	\section{Bilan technique du projet}
		\subsection{Comportement de l'application}
		Notre produit final, c'est à dire l'application, se comporte comme prévu : l'application est fonctionnelle, la liaison entre ses différents modules réussi bien et les différentes fonctionnalités fournissent le résultat attendu. Voici un descriptif du comportement typique de notre application après lancement :
		\begin{itemize}
			\item Importation du fichier à analyser par un parcourant d'arborescence ou par un Drag \& Drop.
			\item Chargement des données du fichier et visualisation des valeurs, avec possibilité d'application de filtres. 
			\item Résultats de l'analyse d'un colonne choisie du fichier avec des graphes et des informations statistiques.
		\end{itemize}
		\paragraph{Tests :} les principales fonctionnalités de notre application ont été testées avec plusieurs cas de tests différents. Ces tests ont traité plusieurs cas d'utilisation de ces fonctionnalités et nous ont permis de trouver quelques erreurs et ainsi les corriger. La décomposition en différents modules de l'application nous a permis de tester ces modules indépendamment, sans qu'il n'y ait d'impact sur les autres modules lorsqu'une erreur se produit. 
		
		\paragraph{Verrous techniques (levés) :} langages de prog nouveaux, points délicats de flask/application web sur l'approche et tout ce qui va avec
	
	%mettez vos trucs (Sonny si tu veux parler de certains de tes trucs qui fonctionnent pas)
	%Quoi marche (comment ca marche - à l'aide de la partie avant)
	%QUoi marche pas (pb et et resolution si trouvee)
		
		\subsection{Problèmes rencontrés}
			\subsubsection*{Problèmes résolus :} gestion des routes avec flask, application de flitres sur les données et pagination, traitement de fichiers mal structurés 
			
			\subsubsection*{Problèmes non résolus :}
				- perfs tab echantillonage (données trop grandes)
				- sonny graphs
				
			\subsubsection*{Points divergent :}
			Justification des points qui divergent par rapport aux specs et organigramme de départ
		
				
	\section{Organisation interne du groupe}
	Ci-dessous se trouve le tableau de la répartition des modules pour chaque membre du groupe établie avant le commencement du développement:
	\begin{center}\begin{longtable}{|>{\centering}m{5cm}|>{\centering}m{2cm}|>{\centering}m{2cm}|>{\centering}m{2.5cm}|>{\centering\arraybackslash}m{1cm}|}			
		\hline \multicolumn{1}{|c|}{\textbf{Module}} & \multicolumn{1}{c|}{\textbf{Malek}} & \multicolumn{1}{ c|}{\textbf{Sonny}} & \multicolumn{1}{c|}{\textbf{Jean-Didier}} & {\textbf{Total}} \\
		\hline 	Gestion des flux & ~ & ~ & x & 1\\
		\hline 	Fenêtre choix fenêtre & ~ & ~ & x & 1\\
		\hline 	Fenêtre rôle et choix colonne & x & ~ & ~ & 1\\
		\hline 	Fenêtre résultats ADD & ~ & x & ~ & 1\\
		\hline  ADD qualitatives & ~ & ~ & x & 1\\
		\hline 	ADD quantitatives discrètes & ~ & x & ~ & 1\\
		\hline 	ADD quantitative continues &  ~ & x & ~ & 1\\
		\hline 	Vérification format fichier & x & ~ & ~ & 1\\
		\hline 	Analyse contenu fichier & x & ~ & ~ & 1\\
		\hline
		\end{longtable}\vspace{1em}\end{center}
		
	1 page
	On expliquera plus tard comment ça s'est déroulé concrètement par rapport à ce qui était prévu.
		
	\section{Coût}
	Tableau indiquant l'estimation et le coût final en nombre de lignes de code, pour chaque module:
	\begin{center}\begin{longtable}{|>{\centering}m{3cm}|>{\centering}m{3cm}|>{\centering\arraybackslash}m{7cm}|>{\centering}m{1.5cm}|}			
		\hline \multicolumn{1}{|c|}{\textbf{Module}} & \multicolumn{1}{c|}{\textbf{Nombre de lignes}} & \multicolumn{1}{c|}{\textbf{Justification}} & \multicolumn{1}{c|}{\textbf{Coût final}}\\
		\hline 	Gestion des flux & 15 & Mise en forme du main et appel de l'application & \\
		\hline 	Fenêtre choix fichier & 10 + 20 & Fonctions pour : Drag\& Drop + Système de fichiers &\\
		\hline 	Fenêtre rôle et choix colonne & 5 + 20 + 10 + 10 + 20 & Communication avec le module application + Affichage de l'interface+ lecteurs des valeurs + 	affichage des valeurs & \\
		\hline 	Fenêtre résultats ADD & 10 + 3* 30 &  Envoie d'informations au module application + Construction des graphe pour l'ADD pour les 3 types d'analyse & \\
		\hline  ADD qualitatives  & 20 + 20*3 & Application des formules pour les calculs de fréquences et d'effectifs + calcul des valeurs pour la construction de 3 graphes & \\
		\hline 	ADD quantitatives discrètes & 60 + 20*2 & Application des formules attaché à l'analyse quantitative discret + calcul des valeurs pour la construction de 2 graphes & \\
		\hline 	ADD quantitatives continu & 20 + 10 + 10 + 5 + 20*2 & Parcours + choix précision classe d'intervalle + écriture + communication avec les modules+ calcul des valeurs pour la construction de 2 graphes & \\
		\hline 	Vérification format fichier & 30 & Ouverture fichier + vérification si ouverture en lecture + présence de texte formaté ou non &\\
		\hline 	Analyse contenu fichier & 20 + 5 + 25 + 10 &  Recopie et vérification + initialisation de la structure+ Parcours du fichiers avec condition + Fonction pour donner nom et type de colonne & \\
		\hline \textbf{Coût Total} & \textbf{565} & \textbf{Estimation totale du coût} & \\
		\hline 	
	\end{longtable}\vspace{1em}\end{center}
		
	\section*{Conclusion}
	1 demi-page, plus tard
		
\end{document}
